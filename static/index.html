<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Claude Remote</title>
  <link rel="stylesheet" href="/static/styles.css">
  <!-- xterm.js -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css">
</head>
<body>
  <!-- ä¼šè¯åˆ—è¡¨è§†å›¾ -->
  <div id="sessions-view" class="view active">
    <header class="header">
      <div class="header-title">
        <div class="logo" onclick="window.app && window.app.toggleDebugPanel()">C</div>
        <h1>Claude Remote</h1>
      </div>
      <button id="create-session" class="btn-add">+</button>
    </header>
    <main class="main">
      <div id="sessions-list" class="sessions-list">
        <div class="loading">åŠ è½½ä¸­...</div>
      </div>
    </main>
  </div>

  <!-- åˆ›å»ºä¼šè¯æ¨¡æ€æ¡† -->
  <div id="create-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title">æ–°å»ºä¼šè¯</h2>
        <button id="modal-close" class="btn-close">&times;</button>
      </div>
      <div class="modal-body">
        <!-- æ­¥éª¤1: é€‰æ‹©å·¥ä½œç›®å½• -->
        <div id="step-workdir" class="step active">
          <div class="step-title">é€‰æ‹©å·¥ä½œç›®å½•</div>
          <!-- å†å²ç›®å½• -->
          <div id="history-dirs" class="history-dirs">
            <div class="section-label">å†å²ç›®å½•</div>
            <div id="workdir-list" class="workdir-list">
              <div class="loading">åŠ è½½ä¸­...</div>
            </div>
          </div>
          <!-- ç›®å½•æµè§ˆå™¨ -->
          <div class="dir-browser">
            <div class="section-label">æµè§ˆç›®å½•</div>
            <div class="current-path">
              <button id="go-parent" class="btn btn-icon">â†‘</button>
              <span id="current-path-text">/Users/bill</span>
              <button id="select-current" class="btn btn-primary">é€‰æ‹©</button>
            </div>
            <div id="dir-list" class="dir-list">
              <div class="loading">åŠ è½½ä¸­...</div>
            </div>
          </div>
        </div>
        <!-- æ­¥éª¤2: é€‰æ‹© Claude ä¼šè¯ -->
        <div id="step-session" class="step">
          <div class="step-title">é€‰æ‹© Claude ä¼šè¯</div>
          <div class="selected-workdir">
            <span id="selected-workdir-text"></span>
            <button id="change-workdir" class="btn btn-text">æ›´æ”¹</button>
          </div>
          <div id="claude-sessions" class="claude-sessions">
            <div class="loading">åŠ è½½ä¸­...</div>
          </div>
          <button id="create-new-session" class="btn btn-primary btn-block">æ–°å»ºä¼šè¯</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ç»ˆç«¯è§†å›¾ -->
  <div id="terminal-view" class="view">
    <!-- å·¥å…·æ  -->
    <header class="toolbar">
      <button id="back-btn" class="btn-back">â†</button>
      <div class="toolbar-center">
        <span id="terminal-title" class="terminal-title">ç»ˆç«¯</span>
        <span id="connection-status" class="connection-status" onclick="window.app && window.app.toggleDebugPanel()">è¿æ¥ä¸­...</span>
      </div>
      <div class="toolbar-right">
        <button id="help-btn" class="btn-help" onclick="window.app && window.app.toggleHelpPanel()">?</button>
        <button id="font-decrease" class="btn btn-icon">A-</button>
        <button id="font-increase" class="btn btn-icon">A+</button>
      </div>
    </header>

    <!-- å¸®åŠ©é¢æ¿ -->
    <div id="help-panel" class="help-panel">
      <div class="help-content">
        <div class="help-header">
          <span>æŒ‰é”®è¯´æ˜</span>
          <button onclick="window.app && window.app.toggleHelpPanel()">âœ•</button>
        </div>
        <div class="help-list">
          <div class="help-item"><span class="help-key">â†‘</span><span>ä¸Šä¸€æ¡å†å²å‘½ä»¤</span></div>
          <div class="help-item"><span class="help-key">â†“</span><span>ä¸‹ä¸€æ¡å†å²å‘½ä»¤</span></div>
          <div class="help-item"><span class="help-key">ESC</span><span>å–æ¶ˆå½“å‰è¾“å…¥</span></div>
          <div class="help-item"><span class="help-key">TAB</span><span>è‡ªåŠ¨è¡¥å…¨</span></div>
          <div class="help-item"><span class="help-key">^C</span><span>ä¸­æ–­å½“å‰æ“ä½œ</span></div>
          <div class="help-item"><span class="help-key">â¤’</span><span>ç‚¹å‡»åˆ°é¡¶éƒ¨ / é•¿æŒ‰å‘ä¸Šæ»šåŠ¨</span></div>
          <div class="help-item"><span class="help-key">â¤“</span><span>ç‚¹å‡»åˆ°åº•éƒ¨ / é•¿æŒ‰å‘ä¸‹æ»šåŠ¨</span></div>
          <div class="help-item"><span class="help-key">â†µ</span><span>å›è½¦ç¡®è®¤</span></div>
        </div>
        <div class="help-tips">
          <div class="help-tip">ğŸ’¡ ç‚¹å‡»çŠ¶æ€æ æŸ¥çœ‹è°ƒè¯•æ—¥å¿—</div>
        </div>
      </div>
    </div>

    <!-- ç»ˆç«¯è¾“å‡ºåŒºåŸŸ -->
    <div id="terminal-output" class="terminal-container"></div>

    <!-- åº•éƒ¨è¾“å…¥æ ï¼ˆå¸¸é©»ï¼‰ -->
    <div class="bottom-input-bar">
      <div class="special-keys">
        <button class="key-btn" data-key="up">â†‘</button>
        <button class="key-btn" data-key="down">â†“</button>
        <button class="key-btn" data-key="escape">ESC</button>
        <button class="key-btn" data-key="tab">TAB</button>
        <button class="key-btn" data-key="ctrl-c">^C</button>
        <button class="key-btn" data-key="top">â¤’</button>
        <button class="key-btn" data-key="bottom">â¤“</button>
        <button class="key-btn" data-key="enter">â†µ</button>
      </div>
      <div class="input-row" id="input-row">
        <!-- input åŠ¨æ€åˆ›å»º -->
        <button id="send-btn" class="btn btn-primary">å‘é€</button>
      </div>
    </div>
  </div>

  <!-- å…¨å±€é”™è¯¯æ•è· -->
  <script>
    window.onerror = function(msg, url, line, col, error) {
      alert('JS Error: ' + msg + ' at ' + url + ':' + line);
      return false;
    };
    window.addEventListener('unhandledrejection', function(event) {
      alert('Promise Error: ' + event.reason);
    });
  </script>
  <!-- å¼•å…¥åº”ç”¨è„šæœ¬ -->
  <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm-addon-webgl@0.16.0/lib/xterm-addon-webgl.js"></script>
  <script src="/static/terminal.js"></script>
  <script src="/static/app.js"></script>
</body>
</html>
